# Alpha Foot - ุฏููู ูุธุงู ุงูุฏูุน ูุงูุงุดุชุฑุงูุงุช

## ๐ณ ูุธุฑุฉ ุนุงูุฉ ุนูู ูุธุงู ุงูุฏูุน

ูุธุงู ุฏูุน ูุชูุฏู ูุขูู ูุฏุนู Stripe ู Telr ูุน ุฅุฏุงุฑุฉ ุดุงููุฉ ููุงุดุชุฑุงูุงุช ูุงูููุงุชูุฑ.

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ ููุธุงู ุงูุฏูุน

### 1. ุงูููููุงุช ุงูุฑุฆูุณูุฉ

**ุฎุงุฏู ุงูุฏูุน (Payment Server):**
- ูุนุงูุฌุฉ ุทูุจุงุช ุงูุฏูุน
- ุงูุชุญูู ูู ุงูุฏูุน
- ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
- ุฅูุดุงุก ุงูููุงุชูุฑ
- ูุนุงูุฌุฉ ุงููุจุงูุบ ุงููุณุชุฑุฌุนุฉ

**ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- ุฌุฏูู ุงููุนุงููุงุช
- ุฌุฏูู ุงูุงุดุชุฑุงูุงุช
- ุฌุฏูู ุงูููุงุชูุฑ
- ุฌุฏูู ุงูุณุฌูุงุช

**ุงููุงุฌูุงุช ุงูุฃูุงููุฉ:**
- ุตูุญุฉ ุงูุฏูุน
- ุตูุญุฉ ุงูุงุดุชุฑุงูุงุช
- ุตูุญุฉ ุงูููุงุชูุฑ
- ุตูุญุฉ ุงูุณุฌูุงุช

### 2. ุชุฏูู ุงูุฏูุน

```
ุงููุณุชุฎุฏู โ ุงุฎุชูุงุฑ ุงูุฎุทุฉ โ ููุก ุงูุจูุงูุงุช โ ูุนุงูุฌุฉ ุงูุฏูุน โ ุงูุชุญูู โ ุชุฃููุฏ
```

---

## ๐ฐ ุฎุทุท ุงูุงุดุชุฑุงูุงุช

### 1. ุฎุทุท ุงููุงุนุจูู

| ุงูุฎุทุฉ | ุงูุณุนุฑ | ุงููููุฒุงุช |
|------|------|---------|
| **ุฃุณุงุณู** | 99 ุฌ.ู/ุดูุฑ | ููุญุฉ ุชุญูู ุฃุณุงุณูุฉุ ุชูุงุฑูุฑ ุจุณูุทุฉ |
| **ุงุญุชุฑุงูู** | 299 ุฌ.ู/ุดูุฑ | ุฌููุน ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ + ุชุญูููุงุช ูุชูุฏูุฉ |
| **ูุฎุจุฉ** | 599 ุฌ.ู/ุดูุฑ | ุฌููุน ุงูููุฒุงุช + ุงุณุชุดุงุฑุฉ ูุน ุฎุจูุฑ |

### 2. ุฎุทุท ุงููุฏุฑุจูู

| ุงูุฎุทุฉ | ุงูุณุนุฑ | ุงููููุฒุงุช |
|------|------|---------|
| **ูุจุชุฏุฆ** | 199 ุฌ.ู/ุดูุฑ | ุฅุฏุงุฑุฉ ูุฑูู ุตุบูุฑ (10 ูุงุนุจูู) |
| **ูุญุชุฑู** | 499 ุฌ.ู/ุดูุฑ | ุฅุฏุงุฑุฉ ูุฑูู ูุจูุฑ (50 ูุงุนุจ) |
| **ุฃูุงุฏูููุฉ** | 1,499 ุฌ.ู/ุดูุฑ | ุฅุฏุงุฑุฉ ุฃูุงุฏูููุฉ ูุงููุฉ |

### 3. ุฎุทุท ุงูุฃูุงุฏูููุงุช ูุงูุฃูุฏูุฉ

| ุงูุฎุทุฉ | ุงูุณุนุฑ | ุงููููุฒุงุช |
|------|------|---------|
| **ุฐูุจู** | 2,999 ุฌ.ู/ุดูุฑ | 30 ูุงุนุจ + 5 ูุฏุฑุจูู |
| **ุจูุงุชููู** | 5,999 ุฌ.ู/ุดูุฑ | 100 ูุงุนุจ + 20 ูุฏุฑุจ |
| **ูุงุณู** | 9,999 ุฌ.ู/ุดูุฑ | ุนุฏุฏ ุบูุฑ ูุญุฏูุฏ |

---

## ๐ ุงูุฃูุงู ูุงูุชุดููุฑ

### 1. ูุนุงููุฑ ุงูุฃูุงู
- ุงุณุชุฎุฏุงู HTTPS ููุท
- ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- ุชูุงูู ูุน PCI DSS
- ุนุฏู ุชุฎุฒูู ุจูุงูุงุช ุงูุจุทุงูุฉ

### 2. ุงูุชุญูู ูุงููุตุงุฏูุฉ
- ุงูุชุญูู ูู ูููุฉ ุงููุณุชุฎุฏู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุงูุชุญูู ูู ุงูุฏูุน
- ุชุณุฌูู ุฌููุน ุงููุนุงููุงุช

---

## ๐ฑ ุชูุงูู Stripe

### 1. ุฅุนุฏุงุฏ Stripe
```javascript
// ุชุซุจูุช ุงูููุชุจุฉ
npm install stripe @stripe/react-stripe-js

// ุฅูุดุงุก ุนููู Stripe
import { loadStripe } from "@stripe/stripe-js";
const stripePromise = loadStripe(process.env.REACT_APP_STRIPE_KEY);
```

### 2. ุฅูุดุงุก ุฌูุณุฉ ุฏูุน
```javascript
// ุฅูุดุงุก ุฌูุณุฉ ุฏูุน
const session = await stripe.checkout.sessions.create({
  payment_method_types: ['card'],
  line_items: [{
    price_data: {
      currency: 'egp',
      product_data: { name: 'ุฎุทุฉ ุงุญุชุฑุงููุฉ' },
      unit_amount: 29900, // 299 ุฌ.ู
    },
    quantity: 1,
  }],
  mode: 'subscription',
  success_url: 'https://alphafoot.com/success',
  cancel_url: 'https://alphafoot.com/cancel',
});
```

### 3. ูุนุงูุฌุฉ Webhooks
```javascript
// ูุนุงูุฌุฉ ุฃุญุฏุงุซ Stripe
app.post('/webhook', express.raw({type: 'application/json'}), (req, res) => {
  const event = req.body;
  
  switch(event.type) {
    case 'payment_intent.succeeded':
      // ูุนุงูุฌุฉ ุงูุฏูุน ุงููุงุฌุญ
      break;
    case 'customer.subscription.updated':
      // ูุนุงูุฌุฉ ุชุญุฏูุซ ุงูุงุดุชุฑุงู
      break;
    case 'customer.subscription.deleted':
      // ูุนุงูุฌุฉ ุฅูุบุงุก ุงูุงุดุชุฑุงู
      break;
  }
  
  res.json({received: true});
});
```

---

## ๐ช๐ฌ ุชูุงูู Telr

### 1. ุฅุนุฏุงุฏ Telr
```javascript
// ุชุซุจูุช ุงูููุชุจุฉ
npm install telr-payment

// ุฅูุดุงุก ุนููู Telr
import Telr from 'telr-payment';
const telr = new Telr({
  merchantId: process.env.TELR_MERCHANT_ID,
  apiKey: process.env.TELR_API_KEY,
});
```

### 2. ุฅูุดุงุก ุทูุจ ุฏูุน
```javascript
// ุฅูุดุงุก ุทูุจ ุฏูุน
const payment = await telr.createPayment({
  amount: 29900, // 299 ุฌ.ู
  currency: 'EGP',
  description: 'ุฎุทุฉ ุงุญุชุฑุงููุฉ',
  orderId: 'ORDER_123',
  customerEmail: 'user@example.com',
});
```

### 3. ูุนุงูุฌุฉ ุงูุฑุฏ
```javascript
// ูุนุงูุฌุฉ ุฑุฏ Telr
app.post('/telr-callback', (req, res) => {
  const { orderId, status, transactionId } = req.body;
  
  if (status === 'success') {
    // ุชุญุฏูุซ ุงูุงุดุชุฑุงู
    updateSubscription(orderId, transactionId);
  }
  
  res.json({success: true});
});
```

---

## ๐ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช

### 1. ุฅูุดุงุก ุงุดุชุฑุงู
```javascript
// ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
const subscription = await db.subscriptions.create({
  userId: user.id,
  planId: plan.id,
  status: 'active',
  startDate: new Date(),
  endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
  price: plan.price,
  stripeSubscriptionId: stripeSubscription.id,
});
```

### 2. ุชุญุฏูุซ ุงูุงุดุชุฑุงู
```javascript
// ุชุฑููุฉ ุงูุงุดุชุฑุงู
const updatedSubscription = await db.subscriptions.update(
  { id: subscription.id },
  {
    planId: newPlan.id,
    price: newPlan.price,
    updatedAt: new Date(),
  }
);
```

### 3. ุฅูุบุงุก ุงูุงุดุชุฑุงู
```javascript
// ุฅูุบุงุก ุงูุงุดุชุฑุงู
const cancelledSubscription = await db.subscriptions.update(
  { id: subscription.id },
  {
    status: 'cancelled',
    endDate: new Date(),
  }
);

// ุฅูุบุงุก ูู Stripe
await stripe.subscriptions.del(subscription.stripeSubscriptionId);
```

---

## ๐ ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ

### 1. ุฅูุดุงุก ูุงุชูุฑุฉ
```javascript
// ุฅูุดุงุก ูุงุชูุฑุฉ
const invoice = await db.invoices.create({
  subscriptionId: subscription.id,
  userId: user.id,
  amount: subscription.price,
  status: 'paid',
  date: new Date(),
  dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
  items: [{
    description: plan.name,
    quantity: 1,
    price: plan.price,
  }],
});
```

### 2. ุชุญููู ุงููุงุชูุฑุฉ
```javascript
// ุชุญููู ุงููุงุชูุฑุฉ ูู PDF
app.get('/invoices/:id/download', async (req, res) => {
  const invoice = await db.invoices.findById(req.params.id);
  
  // ุฅูุดุงุก PDF
  const pdf = generateInvoicePDF(invoice);
  
  res.setHeader('Content-Type', 'application/pdf');
  res.setHeader('Content-Disposition', 'attachment; filename="invoice.pdf"');
  res.send(pdf);
});
```

---

## ๐ธ ูุนุงูุฌุฉ ุงููุจุงูุบ ุงููุณุชุฑุฌุนุฉ

### 1. ุทูุจ ุงุณุชุฑุฌุงุน
```javascript
// ุฅูุดุงุก ุทูุจ ุงุณุชุฑุฌุงุน
const refund = await db.refunds.create({
  transactionId: transaction.id,
  userId: user.id,
  amount: transaction.amount,
  reason: 'customer_request',
  status: 'pending',
});
```

### 2. ูุนุงูุฌุฉ ุงูุงุณุชุฑุฌุงุน
```javascript
// ูุนุงูุฌุฉ ุงูุงุณุชุฑุฌุงุน ูู Stripe
const refund = await stripe.refunds.create({
  payment_intent: transaction.stripePaymentId,
  amount: transaction.amount,
});

// ุชุญุฏูุซ ุญุงูุฉ ุงูุงุณุชุฑุฌุงุน
await db.refunds.update(
  { id: refund.id },
  { status: 'completed', stripeRefundId: refund.id }
);
```

---

## ๐ ุงูุชูุงุฑูุฑ ุงููุงููุฉ

### 1. ุชูุฑูุฑ ุงูุฅูุฑุงุฏุงุช
```javascript
// ุงูุญุตูู ุนูู ุฅูุฑุงุฏุงุช ุงูููู
const todayRevenue = await db.transactions.sum('amount', {
  where: {
    status: 'completed',
    createdAt: { $gte: startOfDay, $lte: endOfDay },
  },
});

// ุงูุญุตูู ุนูู ุฅูุฑุงุฏุงุช ุงูุดูุฑ
const monthRevenue = await db.transactions.sum('amount', {
  where: {
    status: 'completed',
    createdAt: { $gte: startOfMonth, $lte: endOfMonth },
  },
});
```

### 2. ุชูุฑูุฑ ุงูุงุดุชุฑุงูุงุช
```javascript
// ุนุฏุฏ ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ
const activeSubscriptions = await db.subscriptions.count({
  where: { status: 'active' },
});

// ุนุฏุฏ ุงูุงุดุชุฑุงูุงุช ุงูููุบุงุฉ
const cancelledSubscriptions = await db.subscriptions.count({
  where: { status: 'cancelled' },
});
```

---

## ๐ ุงูุฅุดุนุงุฑุงุช ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### 1. ุฅุดุนุงุฑ ุงูุฏูุน ุงููุงุฌุญ
```javascript
// ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู
await sendEmail({
  to: user.email,
  subject: 'ุชู ุชุฃููุฏ ุงูุฏูุน',
  template: 'payment_success',
  data: {
    userName: user.name,
    planName: plan.name,
    amount: transaction.amount,
  },
});
```

### 2. ุฅุดุนุงุฑ ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู
```javascript
// ุฅุฑุณุงู ุชุฐููุฑ ูุจู ุงูุชูุงุก ุงูุงุดุชุฑุงู
const expiringSubscriptions = await db.subscriptions.find({
  where: {
    status: 'active',
    endDate: { $lte: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) },
  },
});

for (const subscription of expiringSubscriptions) {
  await sendEmail({
    to: subscription.user.email,
    subject: 'ุณููุชูู ุงุดุชุฑุงูู ูุฑูุจุงู',
    template: 'subscription_expiring',
  });
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุจุทุงูุงุช ุงุฎุชุจุงุฑ Stripe
- **4242 4242 4242 4242**: ุจุทุงูุฉ ูุงุฌุญุฉ
- **4000 0000 0000 0002**: ุจุทุงูุฉ ูุฑููุถุฉ
- **4000 0025 0000 3155**: ุจุทุงูุฉ ุชุชุทูุจ ูุตุงุฏูุฉ

### 2. ุงุฎุชุจุงุฑ ุงูุงุดุชุฑุงูุงุช
```javascript
// ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงุดุชุฑุงู
test('should create subscription', async () => {
  const subscription = await createSubscription(user, plan);
  expect(subscription.status).toBe('active');
});

// ุงุฎุชุจุงุฑ ุชุฑููุฉ ุงูุงุดุชุฑุงู
test('should upgrade subscription', async () => {
  const updated = await upgradeSubscription(subscription, newPlan);
  expect(updated.planId).toBe(newPlan.id);
});
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

- ุฌููุน ุงููุจุงูุบ ุจุงูุฌููู ุงููุตุฑู (EGP)
- ุงูุงุดุชุฑุงูุงุช ุชุชุฌุฏุฏ ุชููุงุฆูุงู ูู ุดูุฑ
- ูููู ุฅูุบุงุก ุงูุงุดุชุฑุงู ูู ุฃู ููุช
- ุงููุจุงูุบ ุงููุณุชุฑุฌุนุฉ ุชุชู ุฎูุงู 5-7 ุฃูุงู ุนูู
- ุฌููุน ุงููุนุงููุงุช ูุดูุฑุฉ ูุขููุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** ุฏูุณูุจุฑ 2025
**ุงููุคุณุณ:** ููุงุจ ุนูุงุฏ ุฅุจุฑุงููู ุญุณู
**ุงูุฅุตุฏุงุฑ:** 1.0.0
